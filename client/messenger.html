<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CallSpace Messenger</title>
    <link rel="stylesheet" href="messenger-style.css">
</head>
<body>
    <div class="messenger-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <button class="menu-btn" id="backHomeBtn" title="Back to Home" onclick="location.href='/'">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M15 19L8 12L15 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
                <button class="menu-btn" id="menuBtn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M3 12H21M3 6H21M3 18H21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
                <div class="search-box">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path d="M9 17C13.4183 17 17 13.4183 17 9C17 4.58172 13.4183 1 9 1C4.58172 1 1 4.58172 1 9C1 13.4183 4.58172 17 9 17Z" stroke="currentColor" stroke-width="2"/>
                        <path d="M19 19L14.65 14.65" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <input type="text" placeholder="Search" id="searchInput">
                </div>
            </div>
            
            <div class="friends-section">
                <div class="section-title">Friends</div>
                <div class="friends-list" id="friendsList">
                    <!-- Friends will be populated here -->
                </div>
            </div>

            <div class="chats-section">
                <div class="section-title">Chats</div>
                <div class="chats-list" id="chatsList">
                <!-- Chats will be populated here -->
                </div>
            </div>
        </div>
        
        <!-- Main Chat Area -->
        <div class="chat-area">
            <div class="empty-state" id="emptyState">
                <div class="empty-icon">
                    <svg width="120" height="120" viewBox="0 0 120 120" fill="none">
                        <circle cx="60" cy="60" r="60" fill="#E8F0FE"/>
                        <path d="M40 50H80M40 60H70M40 70H80M30 40C30 35.5817 33.5817 32 38 32H82C86.4183 32 90 35.5817 90 40V80C90 84.4183 86.4183 88 82 88H38C33.5817 88 30 84.4183 30 80V40Z" stroke="#4F46E5" stroke-width="3" stroke-linecap="round"/>
                    </svg>
                </div>
                <h2>Select a chat to start messaging</h2>
                <p>Choose from your existing conversations or start a new one</p>
            </div>
            
            <div class="chat-container" id="chatContainer" style="display: none;">
                <!-- Chat Header -->
                <div class="chat-header">
                    <div class="chat-info">
                        <div class="avatar" id="chatAvatar">U</div>
                        <div class="chat-details">
                            <h3 id="chatName">User Name</h3>
                            <span class="status" id="chatStatus">online</span>
                        </div>
                    </div>
                    <div class="chat-actions">
                        <button class="action-btn" id="voiceCallBtn" title="Voice Call">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M3 5C3 3.89543 3.89543 3 5 3H8.27924C8.70967 3 9.09181 3.27543 9.22792 3.68377L10.7257 8.17721C10.8831 8.64932 10.6694 9.16531 10.2243 9.38787L7.96701 10.5165C9.06925 12.9612 11.0388 14.9308 13.4835 16.033L14.6121 13.7757C14.8347 13.3306 15.3507 13.1169 15.8228 13.2743L20.3162 14.7721C20.7246 14.9082 21 15.2903 21 15.7208V19C21 20.1046 20.1046 21 19 21H18C9.71573 21 3 14.2843 3 6V5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                        <button class="action-btn" id="videoCallBtn" title="Video Call">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M16 8L20 4V20L16 16M4 8H14C15.1046 8 16 8.89543 16 10V18C16 19.1046 15.1046 20 14 20H4C2.89543 20 2 19.1046 2 18V10C2 8.89543 2.89543 8 4 8Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                        <button class="action-btn" id="moreBtn" title="More">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <circle cx="12" cy="6" r="2" fill="currentColor"/>
                                <circle cx="12" cy="12" r="2" fill="currentColor"/>
                                <circle cx="12" cy="18" r="2" fill="currentColor"/>
                            </svg>
                        </button>
                    </div>
                </div>
                
                <!-- Messages Area -->
                <div class="messages-area" id="messagesArea">
                    <!-- Messages will be populated here -->
                </div>
                
                <!-- Message Input -->
                <div class="message-input">
                    <button class="attach-btn" id="attachBtn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M21.44 11.05L12.25 20.24C11.1242 21.3658 9.59718 22 8.005 22C6.41282 22 4.88584 21.3658 3.76 20.24C2.63416 19.1142 2 17.5872 2 15.995C2 14.4028 2.63416 12.8758 3.76 11.75L12.33 3.18C13.0806 2.42944 14.0991 2.00671 15.16 2.00671C16.2209 2.00671 17.2394 2.42944 17.99 3.18C18.7406 3.93056 19.1633 4.94913 19.1633 6.01C19.1633 7.07087 18.7406 8.08944 17.99 8.84L9.41 17.41C9.03472 17.7853 8.52536 17.9966 7.995 17.9966C7.46464 17.9966 6.95528 17.7853 6.58 17.41C6.20472 17.0347 5.99344 16.5254 5.99344 15.995C5.99344 15.4646 6.20472 14.9553 6.58 14.58L14.07 7.1" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                    <input type="text" placeholder="Type a message..." id="messageInput">
                    <button class="emoji-btn" id="emojiBtn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                            <path d="M8 14C8 14 9.5 16 12 16C14.5 16 16 14 16 14M9 9H9.01M15 9H15.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </button>
                    <button class="send-btn" id="sendBtn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M22 2L11 13M22 2L15 22L11 13M22 2L2 8L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- New Chat Modal -->
    <div class="modal" id="newChatModal" style="display: none;">
        <div class="modal-overlay" id="newChatOverlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>New Chat</h3>
                <button class="close-btn" id="closeNewChat">Ã—</button>
            </div>
            <div class="modal-body">
                <input type="text" class="input" placeholder="Enter user ID or name" id="newChatInput">
                <button class="btn btn-primary" id="startChatBtn">Start Chat</button>
            </div>
        </div>
    </div>
    
    <!-- Video Call Modal -->
    <div class="video-modal" id="videoModal" style="display: none;">
        <div class="video-container">
            <video id="localVideo" autoplay muted playsinline></video>
            <video id="remoteVideo" autoplay playsinline></video>
            <div class="video-controls">
                <button class="video-btn" id="toggleAudioBtn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M12 1V14M12 14C10.3431 14 9 12.6569 9 11V4C9 2.34315 10.3431 1 12 1C13.6569 1 15 2.34315 15 4V11C15 12.6569 13.6569 14 12 14ZM12 14V19M12 19C8.68629 19 6 16.3137 6 13V11M12 19C15.3137 19 18 16.3137 18 13V11M9 23H15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
                <button class="video-btn" id="toggleVideoBtn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M16 8L20 4V20L16 16M4 8H14C15.1046 8 16 8.89543 16 10V18C16 19.1046 15.1046 20 14 20H4C2.89543 20 2 19.1046 2 18V10C2 8.89543 2.89543 8 4 8Z" stroke="currentColor" stroke-width="2"/>
                    </svg>
                </button>
                <button class="video-btn end-call" id="endCallBtn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M3 5C3 3.89543 3.89543 3 5 3H8.27924C8.70967 3 9.09181 3.27543 9.22792 3.68377L10.7257 8.17721C10.8831 8.64932 10.6694 9.16531 10.2243 9.38787L7.96701 10.5165C9.06925 12.9612 11.0388 14.9308 13.4835 16.033L14.6121 13.7757C14.8347 13.3306 15.3507 13.1169 15.8228 13.2743L20.3162 14.7721C20.7246 14.9082 21 15.2903 21 15.7208V19C21 20.1046 20.1046 21 19 21H18C9.71573 21 3 14.2843 3 6V5Z" stroke="currentColor" stroke-width="2"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>
    
    <div id="toastContainer" class="toast-container"></div>
    
    <script src="config.js"></script>
    <script src="messenger-app.js"></script>
</body>
</html>
